---
lab:
    title: '实验室教学 2 - 功能应用程序'
    module: '模块 2 - 实施平台保护'
---

# 模块 2：实验室教学 2 - 功能应用程序


Azure 功能应用程序使用 Azure 应用程序服务基础结构。本主题介绍了如何在 Azure 门户中创建功能应用程序。功能应用程序是承载各个功能执行的容器。在应用程序服务托管计划中创建功能应用程序时，该功能应用程序可以使用应用程序服务的所有特性。

## 练习 1：创建一个功能并触发

### 任务 1：实验室教学设置

1.  打开 PowerShell，然后运行以下命令：

     ```powershell
    start "https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FMicrosoftLearning%2FAZ-500-Azure-Security%2Fmaster%2FAllfiles%2FLabs%2FMod2_Lab02%2Ftemplate.json" 
     ```

2.  在资源组部分中单击**“新建”**。
3.  输入**“myResourceGroup”**作为名称，然后单击**“确定”**。
4.  选中刀片服务器底部的复选框，同意条款。
5.  选择**“购买”**。


### 任务 2：向功能应用程序添加 HTTP 触发器

1.  选择资源组。

1.  选择你在实验室教学设置中创建的资源组

1.  选择已在资源组中创建的功能应用程序模板
警告
**注**：当前没有与功能应用程序相关的功能


1.  单击**“功能”**。

1.  单击**“新功能”**。

1.  在右上角，单击幻灯片按钮，获得实验语言支持。
警告
**注意**：现在已将其他语言添加到触发器


1.  选择**“HTTP 触发器”**。

1.  将语言更改为**“PowerShell”**。

1.  保留为默认名称，

1.  确保**“身份验证”**级别设置为功能。

1.  单击**“创建”**。

 现在，你已创建模板 PS1 HTTP 触发器，如果模板代码未显示，则刷新页面。 

### 任务 3：测试对 HTTP 触发器的 REST 调用

1.  请注意功能应用程序的名称（**功能应用程序图标旁**）。

1.  在**“HTTP 触发器”**功能中单击**“管理”**。

1.  在功能键下，选择对默认功能键的操作下复制，并将其保存在记事本文件中。

1.  打开**“PowerShell ISE”**并在以下**“URL”**中代码中复制 powerhsell 代码

     ```cli
    https://github.com/GoDeploy/AZ500/blob/master/AZ500%20Mod2%20Lab%202/RESTgetHTTPtrigger.ps1
     ```

1.  使用你的功能应用程序名，填入 $功能应用程序名变量 = ""

1.  使用上一步中从门户复制的长功能键填入变量 $功能键 = ""

1.  运行 powershell 脚本

1.  在**“ISE”**的结果中，你应该看到以下输出

    ```powershell
    这是常规 GET 操作调用 HTTP 触发器的结果。
    Hello 

    这是使用传递给触发器的额外参数，由常规 GET 操作调用 HTTP 触发器导致的结果
    Hello World!

    这是常规 PUT 操作调用 HTTP 触发器的结果，该触发器转换为 JSON 的散列表数输入到 HTTP 触发器
    Hello Max Power
    ```

**“结果”**：你已经成功构建了 HTTP 触发器功能应用程序，并能够使用基于 REST 的命令与之交互。


| 警告：在继续之前，你应该删除此实验室教学使用的所有资源。  为此，应在**“Azure 门户”**中，单击**“资源组”**。  选择你创建的任何资源组。  在资源组刀片服务器上，单击**“删除资源组”**，输入资源组名，然后单击**“删除”**。  对你创建的任何其他资源组重复该过程。**“否则可能会导致其他实验室教学出现问题”**。 |
| --- |

**“恭喜你”**：现在你已经完成了本实验室教学。
